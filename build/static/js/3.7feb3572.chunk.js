(this["webpackJsonpinstagram-momo"]=this["webpackJsonpinstagram-momo"]||[]).push([[3],{335:function(e,t,s){"use strict";s.r(t);var c=s(11),a=s(5),i=s(19),n=s(23),r=s(93),l=s(20),o=s(131),d=s(0),j=function(e){var t=e.username,s=e.name,c=e.user_id,a=e.profile_image;return Object(d.jsxs)("div",{className:"flex flex-col items-center w-full py-6 mx-auto text-center bg-white border border-gray-200 rounded shadow ",children:[Object(d.jsx)(n.b,{to:"/".concat(t),children:Object(d.jsx)("div",{className:"w-12 h-12 mb-1 rounded-full",children:Object(d.jsx)("img",{src:a,alt:"".concat(t,"'s profile'"),className:"object-cover w-full h-full overflow-hidden rounded-full"})})}),Object(d.jsxs)(n.b,{to:"/".concat(t),children:[Object(d.jsx)("p",{className:"mb-1 text-base font-semibold text-gray-primary",children:t}),Object(d.jsxs)("p",{className:"mb-4 text-sm text-gray-light",children:[" ",s]})]}),Object(d.jsx)(o.a,{username:t,name:s,profile_image:a,user_id:c})]})},b=s(94),m=s.n(b),u=(s(119),s(120),s(329)),x=s(33),O=s(26),h=s(15),f=function(){var e=Object(O.b)(),t=e.followerIds,s=e.currentUserData,c=Object(u.a)(x.h,{variables:{limit:10,followerIds:t,createdAt:(null===s||void 0===s?void 0:s.created_at)?null===s||void 0===s?void 0:s.created_at:null}}),a=c.data,i=c.loading;return Object(d.jsxs)("div",{className:"mb-8 ",children:[Object(d.jsx)("h2",{className:"text-base font-semibold leading-4 text-gray-600",children:"Suggestions For You"}),Object(d.jsx)("div",{className:"mt-4",children:i?Object(d.jsx)(h.p,{}):Object(d.jsx)(m.a,Object(l.a)(Object(l.a)({},{infinite:!0,speed:1e3,slidesToShow:3,slidesToScroll:3,initialSlide:0,responsive:[{breakpoint:800,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,initialSlide:1}}]}),{},{children:null===a||void 0===a?void 0:a.users.map((function(e){return Object(d.jsx)(j,Object(l.a)({},e),e.id)}))}))})]})},p=s(169),v=s(154),g=s(68),N=s(30);t.default=function(e){var t=e.id,s=e.likes,l=e.likes_aggregate,o=e.caption,j=e.user,b=e.saved_posts,m=e.comments,u=e.comments_aggregate,I=e.created_at,S=e.media,k=e.index,_=Object(i.h)(),C=Object(O.b)().currentUserId,T=Object(a.useState)(""),Q=Object(c.a)(T,2),U=Q[0],D=Q[1],F=Object(a.useState)(!1),P=Object(c.a)(F,2),z=P[0],A=P[1],J=Object(a.useState)(!1),V=Object(c.a)(J,2),Y=V[0],q=V[1],B=l.aggregate.count,E=u.aggregate.count,G=j.username,H=1===k,K=Object(p.a)(N.a,{variables:{userId:C,postId:t,content:U},refetchQueries:[x.b]}),L=Object(c.a)(K,1)[0];function M(){_("/".concat(j.username))}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"mb-8 overflow-hidden bg-white border rounded shadow-sm text-gray-primary",children:[Object(d.jsxs)("div",{className:"flex items-center justify-between w-full p-3",children:[Object(d.jsx)(r.a,{user:j}),Object(d.jsx)("span",{onClick:function(){return q(!0)},className:"cursor-pointer",children:Object(d.jsx)(h.r,{})})]}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"object-cover w-full h-full",src:S,alt:"postpic"})}),Object(d.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[Object(d.jsxs)("div",{className:"flex items-center flex-1 gap-3",children:[Object(d.jsx)(w,{likes:s,postId:t,authorId:j.user_id}),Object(d.jsx)("label",{htmlFor:"comment",children:Object(d.jsx)(h.f,{})}),Object(d.jsx)(h.w,{})]}),Object(d.jsx)(y,{postId:t,savedPosts:b})]}),Object(d.jsxs)("div",{className:"px-3 pb-2",children:[Object(d.jsx)("div",{children:Object(d.jsx)("span",{className:"text-sm font-medium",children:1===B?"1 like":"".concat(B," likes")})}),Object(d.jsx)("div",{className:"pt-1",children:Object(d.jsxs)("div",{className:"mb-2 text-sm ",children:[Object(d.jsxs)("div",{className:"".concat(z?"":"line-clamp-1"),children:[Object(d.jsx)(n.b,{to:"/".concat(G),children:Object(d.jsx)("h3",{className:"inline mr-1 font-medium",children:G})}),Object(d.jsx)("p",{className:"inline text-base",children:o})]}),Object(d.jsx)("span",{onClick:function(){return A(!z)},className:"cursor-pointer text-gray-light",children:z?"less":"more"})]})}),E>2&&Object(d.jsx)(n.b,{to:"/p/".concat(t),children:Object(d.jsxs)("div",{className:"mb-2 text-sm font-medium cursor-pointer text-gray-light",children:["View all ",E," comments"]})}),Object(d.jsx)("div",{className:"mb-2",children:Object(d.jsx)("div",{className:"flex flex-col gap-2 ",children:null===m||void 0===m?void 0:m.map((function(e){var t=e.content,s=e.created_at,c=e.user;return Object(d.jsxs)("div",{className:"flex justify-between",children:[Object(d.jsx)("div",{className:"flex gap-2 ",children:Object(d.jsxs)("h3",{className:"inline text-sm font-medium",children:[Object(d.jsx)("span",{className:"cursor-pointer ",onClick:M,children:c.username}),Object(d.jsx)("p",{className:"inline ml-1 text-base font-normal break-all",children:t})]})}),Object(d.jsx)("div",{className:"mt-1 text-xs font-normal text-gray-light",children:Object(g.a)(s)})]},e.id)})).slice(0,2)})}),Object(d.jsx)("div",{style:{fontSize:10},className:"mb-2 text-gray-light ",children:Object(g.b)(I)})]}),Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault(),D(""),U.length>0&&L()},children:Object(d.jsxs)("div",{className:"flex border-t",children:[Object(d.jsx)("textarea",{id:"comment",value:U,onChange:function(e){return D(e.target.value)},style:{resize:"none"},placeholder:"Add a comment...",className:"flex-1 h-10 px-3 py-2 focus:outline-none",type:"text"}),Object(d.jsx)("button",{type:"submit",className:"px-3 py-2 font-semibold transition-all duration-300 opacity-50 text-blue-medium hover:opacity-100",children:"Post"})]})})]}),H&&Object(d.jsx)(f,{}),Y&&Object(d.jsx)(v.a,{postId:t,setShowDialog:q})]})};function w(e){var t=e.postId,s=e.authorId,i=e.likes,n=Object(O.b)().currentUserId,r=i.some((function(e){return e.user_id===n})),l=Object(a.useState)(r),o=Object(c.a)(l,2),j=o[0],b=o[1],m=Object(p.a)(N.h,{variables:{postId:t,userId:n,profileId:s},refetchQueries:[x.b]}),u=Object(c.a)(m,1)[0],f=Object(p.a)(N.k,{variables:{postId:t,userId:n,profileId:s},refetchQueries:[x.b]}),v=Object(c.a)(f,1)[0];return Object(d.jsx)("button",{onClick:j?function(){v(),b(!1)}:function(){u(),b(!0)},children:j?Object(d.jsx)(h.n,{}):Object(d.jsx)(h.o,{})})}function y(e){var t=e.postId,s=e.savedPosts,i=Object(O.b)().currentUserId,n=s.some((function(e){return e.user_id===i})),r=Object(a.useState)(n),l=Object(c.a)(r,2),o=l[0],j=l[1],b=Object(p.a)(N.i,{variables:{postId:t,userId:i},refetchQueries:[x.b]}),m=Object(c.a)(b,1)[0],u=Object(p.a)(N.l,{variables:{postId:t,userId:i},refetchQueries:[x.b]}),f=Object(c.a)(u,1)[0];return Object(d.jsx)("button",{onClick:o?function(){f(),j(!1)}:function(){m(),j(!0)},children:o?Object(d.jsx)(h.t,{}):Object(d.jsx)(h.u,{filled:!0})})}}}]);
//# sourceMappingURL=3.7feb3572.chunk.js.map